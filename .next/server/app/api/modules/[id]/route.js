"use strict";(()=>{var e={};e.id=473,e.ids=[473],e.modules={399:e=>{e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},517:e=>{e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},9795:(e,t,r)=>{r.r(t),r.d(t,{originalPathname:()=>I,patchFetch:()=>g,requestAsyncStorage:()=>c,routeModule:()=>d,serverHooks:()=>m,staticGenerationAsyncStorage:()=>l});var s={};r.r(s),r.d(s,{GET:()=>p});var i=r(9303),o=r(8716),a=r(670),n=r(7070),u=r(7982);async function p(e,{params:t}){try{let{data:e,error:r}=await u.O.from("modules").select("*").eq("id",t.id).single();if(r)return n.NextResponse.json({error:r.message},{status:500});if(!e)return n.NextResponse.json({error:"模组不存在"},{status:404});let{data:s,error:i}=await u.O.from("tag_votes").select(`
        subcategory_id,
        tag_subcategories (
          id,
          name,
          description,
          tag_categories (
            id,
            name
          )
        )
      `).eq("module_id",t.id);i&&console.error("Vote stats error:",i);let o={...e,vote_statistics:s||[]};return n.NextResponse.json(o)}catch(e){return n.NextResponse.json({error:"Internal server error"},{status:500})}}let d=new i.AppRouteRouteModule({definition:{kind:o.x.APP_ROUTE,page:"/api/modules/[id]/route",pathname:"/api/modules/[id]",filename:"route",bundlePath:"app/api/modules/[id]/route"},resolvedPagePath:"/home/runner/work/rw-webapp/rw-webapp/src/app/api/modules/[id]/route.ts",nextConfigOutput:"standalone",userland:s}),{requestAsyncStorage:c,staticGenerationAsyncStorage:l,serverHooks:m}=d,I="/api/modules/[id]/route";function g(){return(0,a.patchFetch)({serverHooks:m,staticGenerationAsyncStorage:l})}},7982:(e,t,r)=>{r.d(t,{O:()=>a});let s=require("@supabase/supabase-js"),i="https://eguhisfzeimoivfmikgb.supabase.co",o="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImVndWhpc2Z6ZWltb2l2Zm1pa2diIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTUzOTMzNzEsImV4cCI6MjA3MDk2OTM3MX0.3E8MD1a8SebcCo2IDQmXd9BFv18zh1213eGfZ-3EcD0",a=(0,s.createClient)(i,o);(0,s.createClient)(i,process.env.SUPABASE_SERVICE_ROLE_KEY||o)}};var t=require("../../../../webpack-runtime.js");t.C(e);var r=e=>t(t.s=e),s=t.X(0,[276,972],()=>r(9795));module.exports=s})();