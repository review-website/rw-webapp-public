(()=>{var e={};e.id=480,e.ids=[480],e.modules={2934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},4580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},5869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},5377:(e,s,r)=>{"use strict";r.r(s),r.d(s,{GlobalError:()=>n.a,__next_app__:()=>p,originalPathname:()=>x,pages:()=>c,routeModule:()=>u,tree:()=>o}),r(5362),r(2029),r(5866);var a=r(3191),t=r(8716),l=r(7922),n=r.n(l),i=r(5231),d={};for(let e in i)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(d[e]=()=>i[e]);r.d(s,d);let o=["",{children:["modules",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(r.bind(r,5362)),"/home/runner/work/rw-webapp/rw-webapp/src/app/modules/page.tsx"]}]},{}]},{layout:[()=>Promise.resolve().then(r.bind(r,2029)),"/home/runner/work/rw-webapp/rw-webapp/src/app/layout.tsx"],"not-found":[()=>Promise.resolve().then(r.t.bind(r,5866,23)),"next/dist/client/components/not-found-error"]}],c=["/home/runner/work/rw-webapp/rw-webapp/src/app/modules/page.tsx"],x="/modules/page",p={require:r,loadChunk:()=>Promise.resolve()},u=new a.AppPageRouteModule({definition:{kind:t.x.APP_PAGE,page:"/modules/page",pathname:"/modules",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:o}})},8322:(e,s,r)=>{Promise.resolve().then(r.bind(r,3868))},3868:(e,s,r)=>{"use strict";r.r(s),r.d(s,{default:()=>p});var a=r(326);r(7577);var t=r(434),l=r(5329),n=r(9837),i=r(1223);function d({module:e,showVoteButton:s=!0,showVoteStatus:r=!0}){let d=(0,i.xV)(e.id);return(0,a.jsxs)(l.Zb,{className:"h-full hover:shadow-md transition-shadow border-l-4 border-l-blue-500",children:[(0,a.jsxs)(l.Ol,{className:"pb-4",children:[a.jsx(l.ll,{className:"line-clamp-2 text-lg",children:a.jsx(t.default,{href:`/modules/${e.id}`,className:"hover:text-blue-600 transition-colors font-bold",children:e.name})}),(0,a.jsxs)("div",{className:"flex items-center justify-between mt-2",children:[a.jsx("span",{className:"text-sm text-gray-600 font-medium",children:Array.isArray(e.author)?e.author.join(", "):e.author}),e.system&&a.jsx("span",{className:`text-xs px-2 py-1 rounded-full font-medium ${(e=>{if(!e)return"bg-gray-100 text-gray-700";let s=e.toLowerCase();return s.includes("dnd")||s.includes("d&d")?"bg-red-100 text-red-700":s.includes("coc")||s.includes("克苏鲁")?"bg-green-100 text-green-700":s.includes("pf")||s.includes("pathfinder")?"bg-blue-100 text-blue-700":s.includes("fate")?"bg-purple-100 text-purple-700":s.includes("pbta")?"bg-yellow-100 text-yellow-700":"bg-gray-100 text-gray-700"})(e.system)}`,children:e.system})]})]}),(0,a.jsxs)(l.aY,{className:"flex flex-col h-full pt-0",children:[(0,a.jsxs)("div",{className:"flex-grow space-y-3",children:[e.description&&a.jsx("p",{className:"text-sm text-gray-700 line-clamp-3 leading-relaxed",children:e.description}),a.jsx("div",{className:"text-xs text-gray-500",children:(0,i.p6)(e.created_at)})]}),(0,a.jsxs)("div",{className:"flex justify-between items-center mt-4 pt-4 border-t",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[r&&a.jsx("span",{className:`text-xs px-2 py-1 rounded-full ${d?"bg-green-100 text-green-800":"bg-gray-100 text-gray-600"}`,children:d?"已投票":"未投票"}),(0,a.jsxs)("span",{className:"text-xs text-gray-500",children:[e.vote_count||0," 个标签投票"]})]}),s&&(0,a.jsxs)("div",{className:"flex space-x-2",children:[a.jsx(t.default,{href:`/modules/${e.id}`,children:a.jsx(n.z,{size:"sm",variant:"outline",children:"查看详情"})}),e.purchase_url&&a.jsx("a",{href:e.purchase_url,target:"_blank",rel:"noopener noreferrer",className:"text-xs px-2 py-1 bg-green-100 text-green-700 rounded hover:bg-green-200 transition-colors",children:"购买"}),!d&&a.jsx(t.default,{href:`/vote/${e.id}`,children:a.jsx(n.z,{size:"sm",children:"投票"})})]})]})]})]})}function o({modules:e,pagination:s,loading:r=!1,onPageChange:t}){if(r)return a.jsx("div",{className:"space-y-6",children:a.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:Array.from({length:6}).map((e,s)=>(0,a.jsxs)("div",{className:"bg-white rounded-lg shadow p-6 animate-pulse",children:[a.jsx("div",{className:"h-4 bg-gray-200 rounded mb-4"}),a.jsx("div",{className:"h-3 bg-gray-200 rounded mb-2"}),a.jsx("div",{className:"h-3 bg-gray-200 rounded mb-2"}),a.jsx("div",{className:"h-3 bg-gray-200 rounded w-1/2"})]},s))})});if(0===e.length)return a.jsx("div",{className:"text-center py-12",children:(0,a.jsxs)("div",{className:"text-gray-500 mb-4",children:[a.jsx("svg",{className:"w-16 h-16 mx-auto mb-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1,d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})}),a.jsx("p",{className:"text-lg",children:"暂无模组数据"}),a.jsx("p",{className:"text-sm",children:"请稍后再试或联系管理员"})]})});let l=(s.page-1)*s.limit+1,i=Math.min(s.page*s.limit,s.total);return(0,a.jsxs)("div",{className:"space-y-6",children:[a.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:e.map(e=>a.jsx(d,{module:e},e.id))}),s.totalPages>1&&(0,a.jsxs)("div",{className:"flex flex-col sm:flex-row justify-between items-center gap-4",children:[(0,a.jsxs)("div",{className:"text-sm text-gray-600",children:["显示第 ",l," - ",i," 项，共 ",s.total," 项"]}),(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[a.jsx(n.z,{variant:"outline",size:"sm",disabled:1===s.page,onClick:()=>t?.(s.page-1),children:"上一页"}),a.jsx("div",{className:"flex space-x-1",children:(()=>{let e=[],r=s.page,l=s.totalPages,i=Math.max(1,r-2),d=Math.min(l,r+2);i>1&&(e.push(a.jsx(n.z,{variant:1===r?"primary":"outline",size:"sm",onClick:()=>t?.(1),children:"1"},1)),i>2&&e.push(a.jsx("span",{className:"px-2",children:"..."},"ellipsis1")));for(let s=i;s<=d;s++)e.push(a.jsx(n.z,{variant:s===r?"primary":"outline",size:"sm",onClick:()=>t?.(s),children:s},s));return d<l&&(d<l-1&&e.push(a.jsx("span",{className:"px-2",children:"..."},"ellipsis2")),e.push(a.jsx(n.z,{variant:l===r?"primary":"outline",size:"sm",onClick:()=>t?.(l),children:l},l))),e})()}),a.jsx(n.z,{variant:"outline",size:"sm",disabled:s.page===s.totalPages,onClick:()=>t?.(s.page+1),children:"下一页"})]})]})]})}var c=r(3725),x=r(6137);function p(){let{modules:e,pagination:s,loading:r,error:t,searchModules:l,goToPage:i,fetchModules:d}=(0,x.kI)();return(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)("div",{className:"flex justify-between items-center",children:[a.jsx("h1",{className:"text-3xl font-bold text-gray-900 dark:text-yellow-700",children:"模组列表"}),a.jsx(n.z,{variant:"outline",children:"添加模组"})]}),a.jsx(c.E,{placeholder:"搜索模组、作者、系统...",onSearch:l}),t&&(0,a.jsxs)("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4",children:[(0,a.jsxs)("p",{className:"text-red-600",children:["错误: ",t]}),a.jsx(n.z,{variant:"outline",size:"sm",className:"mt-2",onClick:()=>{d()},children:"重试"})]}),a.jsx(o,{modules:e,pagination:s,loading:r,onPageChange:i})]})}},3725:(e,s,r)=>{"use strict";r.d(s,{E:()=>n});var a=r(326),t=r(7577),l=r(1223);function n({placeholder:e="搜索模组、作者或标签...",onSearch:s,debounceDelay:r=300,className:n}){let[i,d]=(0,t.useState)("");return(0,a.jsxs)("div",{className:(0,l.cn)("relative",n),children:[a.jsx("input",{type:"text",placeholder:e,value:i,onChange:e=>d(e.target.value),className:"w-full px-4 py-2 pl-10 pr-4 text-gray-900 bg-white border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent"}),a.jsx("div",{className:"absolute inset-y-0 left-0 flex items-center pl-3",children:a.jsx("svg",{className:"w-5 h-5 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})})})]})}},5362:(e,s,r)=>{"use strict";r.r(s),r.d(s,{default:()=>a});let a=(0,r(8570).createProxy)(String.raw`/home/runner/work/rw-webapp/rw-webapp/src/app/modules/page.tsx#default`)}};var s=require("../../webpack-runtime.js");s.C(e);var r=e=>s(s.s=e),a=s.X(0,[276,471,747,122],()=>r(5377));module.exports=a})();